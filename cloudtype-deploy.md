# 클라우드타입 배포 가이드

## 1. 사전 준비사항

### GitHub 저장소 설정
1. 프로젝트를 GitHub 저장소에 푸시합니다.
2. 저장소를 public으로 설정하거나 클라우드타입에서 접근 가능하도록 설정합니다.

### 클라우드타입 계정
1. [클라우드타입](https://cloudtype.io)에 가입합니다.
2. GitHub 계정과 연동합니다.

## 2. 배포 단계

### 2.1 클라우드타입 콘솔에서 배포
1. 클라우드타입 콘솔에 로그인합니다.
2. "새 프로젝트 생성" 버튼을 클릭합니다.
3. GitHub 저장소를 선택합니다.
4. 브랜치를 선택합니다 (보통 `main` 또는 `master`).

### 2.2 환경 설정
다음 환경변수들을 설정합니다:

```
NODE_ENV=production
PORT=3000
DATABASE_PATH=/app/database/reservations.db
```

### 2.3 빌드 설정
- **빌드 명령어**: `npm install`
- **시작 명령어**: `npm start`
- **Node.js 버전**: 18.x

## 3. 배포 후 확인사항

### 3.1 애플리케이션 상태 확인
1. 클라우드타입 콘솔에서 애플리케이션 상태를 확인합니다.
2. 로그를 확인하여 오류가 없는지 점검합니다.

### 3.2 기능 테스트
1. 메인 페이지 접속: `https://your-app-name.cloudtype.app`
2. 예약 기능 테스트
3. 관리자 페이지 접속: `https://your-app-name.cloudtype.app/admin.html`

## 4. 문제 해결

### 4.1 일반적인 문제들

#### 데이터베이스 연결 오류
- 데이터베이스 파일 경로가 올바른지 확인
- 파일 권한 설정 확인

#### CORS 오류
- 클라이언트에서 API 호출 시 도메인 확인
- 환경변수 `ALLOWED_ORIGINS` 설정 확인

#### 포트 바인딩 오류
- `app.js`에서 `0.0.0.0`으로 바인딩되어 있는지 확인
- 환경변수 `PORT` 설정 확인

### 4.2 로그 확인
클라우드타입 콘솔에서 실시간 로그를 확인하여 문제를 진단할 수 있습니다.

## 5. 업데이트 배포

### 5.1 코드 업데이트
1. 로컬에서 코드를 수정합니다.
2. GitHub 저장소에 푸시합니다.
3. 클라우드타입에서 자동으로 재배포됩니다.

### 5.2 수동 재배포
필요한 경우 클라우드타입 콘솔에서 수동으로 재배포할 수 있습니다.

## 6. 보안 고려사항

### 6.1 환경변수 관리
- 민감한 정보는 환경변수로 관리
- 프로덕션 환경에서는 적절한 CORS 설정

### 6.2 데이터베이스 백업
- 정기적으로 데이터베이스 백업
- 클라우드타입의 볼륨 기능 활용 고려

## 7. 모니터링

### 7.1 헬스체크
- `/health` 엔드포인트를 통한 애플리케이션 상태 모니터링
- 클라우드타입의 헬스체크 기능 활용

### 7.2 로그 모니터링
- 애플리케이션 로그를 통한 오류 추적
- 성능 모니터링을 위한 로그 분석 